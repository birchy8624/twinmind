'use client'

import Link from 'next/link'
import type { Route } from 'next'
import { usePathname, useRouter } from 'next/navigation'
import { useMemo, useState, type ReactNode } from 'react'
import { AnimatePresence, motion } from 'framer-motion'

import { ActiveProfileProvider, useActiveProfile } from './_components/active-profile-context'
import { ToastProvider } from './_components/toast-context'
import { NotificationsMenu } from './_components/notifications-menu'
import { WorkspaceAccountMenu } from './_components/workspace-account-menu'
import { WorkspaceSearch } from './_components/workspace-search'

const navigation = [
  { href: '/app/dashboard', label: 'Dashboard', hint: 'Studio overview' },
  { href: '/app/clients', label: 'Clients', hint: 'Relationships and health' },
  { href: '/app/projects', label: 'Projects', hint: 'Delivery and assets' },
  { href: '/app/kanban', label: 'Kanban', hint: 'Pipeline view' },
  { href: '/app/settings', label: 'Settings', hint: 'Workspace preferences' }
] satisfies ReadonlyArray<{ href: Route; label: string; hint: string }>

type AppShellLayoutProps = {
  children: ReactNode
}

function AppShellLayoutInner({ children }: AppShellLayoutProps) {
  const pathname = usePathname()
  const router = useRouter()
  const [mobileOpen, setMobileOpen] = useState(false)
  const { profile, account } = useActiveProfile()

  const activeLabel = useMemo(() => {
    const match = navigation.find((item) => pathname?.startsWith(item.href))
    return match?.label ?? 'Workspace'
  }, [pathname])

  const NavLinks = (
    <nav className="mt-10 space-y-1 text-sm">
      {navigation.map((item) => {
        const isActive = pathname === item.href || pathname?.startsWith(`${item.href}/`)
        return (
          <Link
            key={item.href}
            href={item.href}
            className={`group flex flex-col gap-1 rounded-xl px-4 py-3 transition ${
              isActive
                ? 'bg-white/10 text-white shadow-[0_0_30px_rgba(255,255,255,0.08)]'
                : 'text-white/70 hover:bg-white/5 hover:text-white'
            }`}
            onClick={() => setMobileOpen(false)}
          >
            <span className="text-sm font-semibold">{item.label}</span>
            <span className="text-[11px] uppercase tracking-wide text-white/40">{item.hint}</span>
          </Link>
        )
      })}
    </nav>
  )

  const showNavigation = true

  return (
    <ToastProvider>
      <div className="min-h-screen bg-base-950 text-white">
        {showNavigation ? (
          <aside className="hidden w-72 flex-col border-r border-white/10 bg-base-900/70 p-6 backdrop-blur lg:fixed lg:inset-y-0 lg:flex">
            <div className="mb-8">
              <div className="flex items-center gap-3">
                <svg
                  className="h-10 w-10 flex-shrink-0"
                  viewBox="0 0 267 259"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  aria-hidden="true"
                >
                  <path
                    d="M105.612 3.7438C114.722 9.31108 120.644 16.449 123.612 26.7438C124.105 30.8033 124.082 34.7923 124.003 38.8766C123.997 39.9945 123.991 41.1123 123.986 42.264C123.963 45.7994 123.913 49.3337 123.862 52.8688C123.842 55.2802 123.824 57.6917 123.807 60.1032C123.764 65.9837 123.697 71.8637 123.612 77.7438C122.674 77.8643 121.736 77.9847 120.769 78.1088C119.526 78.2758 118.283 78.4428 117.003 78.6149C115.162 78.8574 115.162 78.8574 113.285 79.1049C101.177 81.2111 92.1744 87.646 84.6747 97.2438C81.1095 102.693 78.8144 109.202 79.6122 115.744C81.4392 117.993 81.4392 117.993 84.1122 117.994C86.7851 117.993 86.7851 117.993 88.6122 115.744C89.2403 113.862 89.8166 111.963 90.3622 110.056C93.1937 101.469 96.52 97.6115 104.55 93.4313C111.283 90.31 116.066 88.7438 123.612 88.7438C123.612 102.934 123.612 117.124 123.612 131.744C118.332 132.734 113.052 133.724 107.612 134.744C99.8051 137.548 93.2531 140.81 86.6122 145.744C85.6222 146.445 84.6321 147.146 83.6122 147.869C80.6423 150.389 78.5672 153.47 76.2997 156.619C69.4129 166.009 61.5562 171.096 50.6121 174.744C39.2358 175.849 28.7013 175.555 18.6121 169.744C17.519 169.146 16.4259 168.548 15.2996 167.931C7.65321 161.707 2.76133 154.407 0.612149 144.744C-0.214173 136.331 -1.0072 126.78 3.98715 119.572C9.38132 113.503 14.1554 109.182 22.4246 108.369C27.7958 108.531 32.3314 110.531 36.1903 114.275C39.9237 118.652 40.7508 121.083 40.7371 126.744C40.741 128.353 40.741 128.353 40.745 129.994C40.6121 132.744 40.6121 132.744 39.6121 134.744C39.4455 138.286 39.4455 138.286 39.6121 141.744C40.7375 143.1 40.7375 143.1 43.6746 142.806C45.1287 142.775 45.1287 142.775 46.6121 142.744C50.7417 136.818 51.1286 132.423 50.8621 125.306C50.8441 124.384 50.8261 123.462 50.8075 122.511C50.7607 120.254 50.6952 118 50.6121 115.744C51.4208 115.368 51.4208 115.368 52.2457 114.985C59.1835 111.662 64.2749 107.402 67.1473 99.9743C68.25 94.683 68.1306 89.1031 67.6122 83.7438C66.9521 82.7538 66.2922 81.7638 65.6122 80.7438C62.1472 81.2388 62.1471 81.2388 58.6121 81.7438C58.5735 83.1553 58.5735 83.1553 58.534 84.5954C57.9689 97.0026 57.9689 97.0026 53.6121 101.744C53.1623 102.277 52.7124 102.811 52.2489 103.361C50.1637 105.123 49.0039 105.177 46.2996 105.181C45.561 105.201 44.8224 105.22 44.0614 105.24C41.6121 104.744 41.6121 104.744 38.7996 102.845C35.2815 100.526 31.9745 99.5746 27.9246 98.6813C19.8245 96.8787 19.8245 96.8787 17.6121 93.7438C14.722 85.0734 15.2325 73.2571 19.1121 65.0563C24.6789 55.7741 32.1238 48.962 42.6121 45.7438C50.2502 44.5886 59.3967 44.1958 66.1043 48.4821C70.9763 52.5589 73.2538 56.5697 74.6122 62.7438C77.5287 62.9106 77.5287 62.9106 80.6122 62.7438C83.0875 60.2684 82.8257 59.4577 82.9247 56.0563C83.3848 50.8285 84.5797 47.2392 88.6122 43.7438C90.9402 42.6233 93.2992 41.7055 95.7098 40.779C97.9733 39.8149 97.9733 39.8149 98.7997 36.6188C98.921 33.6129 98.921 33.6129 96.6122 31.7438C90.9432 31.0769 87.1001 32.3625 82.6122 35.7438C80.4895 37.6608 78.5657 39.6473 76.6122 41.7438C74.2476 40.8285 71.914 39.8888 69.6278 38.7907C64.05 36.1402 58.7045 34.7104 52.6121 33.7438C52.9774 24.0648 57.3323 16.5513 64.2372 9.8688C75.6837 0.36694 91.8441 -3.46543 105.612 3.7438Z"
                    fill="#A0D43D"
                  />
                  <path
                    d="M143.612 89.7438C145.831 89.7149 148.05 89.6944 150.268 89.6774C151.504 89.665 152.74 89.6527 154.013 89.64C167.566 90.0307 180.975 97.1944 190.557 106.494C197.494 114.09 200.088 122.407 201.362 132.494C202.968 142.938 208.5 153.209 216.35 160.318C216.87 160.685 217.389 161.053 217.925 161.431C218.436 161.806 218.948 162.182 219.475 162.568C226.379 166.367 232.864 167.349 240.612 167.931C241.578 168.013 242.543 168.095 243.538 168.179C245.895 168.378 248.253 168.566 250.612 168.744C251.156 178.352 250.011 186.857 243.862 194.619C237.701 201.107 230.225 204.734 221.3 205.119C212.869 204.925 206.454 201.531 200.405 195.748C193.66 188.209 193.241 180.99 192.978 171.287C192.619 160.181 190.287 151.689 182.807 143.255C179.906 141.257 178.063 141.316 174.612 141.744C172.394 143.56 172.394 143.56 172.28 146.127C172.691 149.364 173.639 150.338 175.925 152.619C182.532 159.24 182.979 165.585 183.05 174.494C183.382 186.328 185.211 195.895 193.612 204.744C201.354 211.935 210.187 215.071 220.612 215.744C221.199 226.303 217.95 235.289 211.612 243.744C204.435 251.595 195.448 257.265 184.706 258.017C172.45 258.404 162.937 257.167 153.612 248.431C150.042 244.545 147.457 240.685 145.612 235.744C145.272 234.837 144.931 233.929 144.58 232.995C143.6 229.703 143.365 227.129 143.372 223.707C143.369 222.521 143.366 221.335 143.363 220.113C143.37 218.825 143.378 217.538 143.385 216.211C143.386 214.831 143.385 213.451 143.384 212.071C143.384 208.335 143.395 204.6 143.409 200.865C143.422 196.958 143.423 193.05 143.425 189.142C143.432 181.747 143.448 174.353 143.468 166.958C143.49 158.537 143.501 150.117 143.511 141.696C143.532 124.378 143.568 107.061 143.612 89.7438Z"
                    fill="#F5F5F5"
                  />
                  <path
                    d="M198.042 6.21643C207.226 12.7566 212.802 21.8445 215.3 32.7438C215.685 36.4413 215.676 40.0268 215.612 43.7438C216.52 43.785 217.427 43.8263 218.362 43.8688C226.831 45.0909 235.988 50.3045 241.612 56.7438C249.114 66.7983 253.039 76.0816 251.612 88.7438C248.915 100.882 239.165 108.667 229.612 115.744C229.888 119.562 229.888 119.562 231.612 122.744C234.69 123.269 236.819 123.185 239.577 121.65C244.286 118.252 248.047 114.308 251.612 109.744C257.051 110.815 259.573 114.348 262.8 118.681C266.994 125.768 267.514 132.671 266.612 140.744C265.365 144.987 263.77 148.883 261.612 152.744C261.106 153.671 260.599 154.597 260.077 155.552C256.219 158.983 252.411 158.434 247.425 158.306C246.516 158.317 245.608 158.328 244.673 158.339C235.376 158.24 228.231 155.118 221.464 148.783C214.541 141.159 211.889 132.504 210.014 122.58C207.628 110.607 202.676 100.935 192.612 93.7438C191.014 92.6936 189.409 91.6519 187.8 90.6188C184.386 88.3845 181.978 86.7442 180.612 82.7438C180.707 77.4409 181.816 74.4401 185.612 70.7438C191.352 66.6859 195.046 66.334 201.925 67.1188C204.834 67.415 207.686 67.6203 210.612 67.7438C212.821 65.9159 212.821 65.9159 213.05 63.3063C212.885 60.5657 212.885 60.5657 210.479 59.1578C207.356 57.6176 204.738 57.0475 201.3 56.5563C199.697 56.3184 199.697 56.3184 198.061 56.0758C197.253 55.9662 196.445 55.8567 195.612 55.7438C195.526 55.1147 195.439 54.4857 195.35 53.8375C193.945 45.2748 191.363 39.4394 184.237 34.2438C180.259 31.7996 177.337 30.9724 172.612 31.7438C170.301 33.6046 170.301 33.6046 170.487 36.5563C171.954 40.7124 173.876 41.4459 177.604 43.5172C180.916 45.5406 182.9 48.3188 184.612 51.7438C184.999 55.0602 184.999 55.0602 184.612 58.7438C182.382 61.3336 182.382 61.3336 179.425 63.6813C174.616 67.729 171.607 71.2529 168.612 76.7438C167.612 77.7438 167.612 77.7438 165.295 77.8573C164.295 77.8521 163.295 77.8468 162.264 77.8414C161.185 77.8382 160.105 77.835 158.993 77.8317C157.857 77.8233 156.72 77.8149 155.55 77.8063C154.409 77.8018 153.269 77.7973 152.095 77.7926C149.267 77.7808 146.44 77.7643 143.612 77.7438C143.51 70.8246 143.44 63.9055 143.392 56.9857C143.372 54.6357 143.345 52.2858 143.31 49.9359C143.261 46.5423 143.239 43.1494 143.221 39.7555C143.201 38.7186 143.18 37.6817 143.159 36.6133C143.156 25.4133 146.398 16.9751 154.167 8.91175C166.558 -2.07428 184.135 -2.21273 198.042 6.21643Z"
                    fill="#F5F5F5"
                  />
                  <path
                    d="M122.612 142.744C124.631 144.763 123.78 148.899 123.789 151.669C123.796 152.5 123.802 153.331 123.809 154.187C123.829 156.954 123.841 159.72 123.85 162.486C123.855 163.431 123.859 164.376 123.863 165.35C123.884 170.362 123.898 175.374 123.907 180.385C123.918 185.545 123.953 190.703 123.993 195.862C124.019 199.841 124.027 203.82 124.031 207.799C124.035 209.699 124.047 211.599 124.066 213.499C124.197 227.748 123.485 238.804 113.124 249.576C104.781 256.777 96.0938 258.221 85.3856 258.029C80.3874 257.651 76.8527 256.322 72.6122 253.744C71.6016 253.187 70.5909 252.63 69.5497 252.056C62.4337 246.454 57.6367 240.664 55.6122 231.744C56.3134 231.525 57.0147 231.306 57.7372 231.08C67.1558 227.932 74.7425 223.695 79.6122 214.744C81.7392 209.376 82.5449 203.481 81.6122 197.744C80.3601 195.881 80.3601 195.881 78.6122 194.744C75.294 194.986 75.294 194.986 72.6122 196.744C72.3403 198.783 72.095 200.825 71.8622 202.869C70.9872 208.616 70.104 212.862 65.6122 216.744C58.5714 221.845 49.9592 221.803 41.6122 220.744C38.1903 219.531 35.5035 217.916 32.6122 215.744C31.7047 215.166 30.7972 214.589 29.8622 213.994C24.4821 208.614 20.8493 200.907 20.4169 193.314C20.4401 192.177 20.4633 191.04 20.4872 189.869C20.5052 188.716 20.5233 187.564 20.5419 186.377C20.5651 185.508 20.5883 184.639 20.6122 183.744C21.4846 183.905 22.3569 184.065 23.2557 184.231C28.4546 185.025 33.6116 184.969 38.8622 184.994C39.9437 185.014 41.0252 185.035 42.1395 185.056C55.9951 185.123 67.8593 180.692 77.8622 170.931C80.8857 167.755 83.6536 164.489 86.2997 160.994C94.6485 149.997 108.41 141.705 122.612 142.744Z"
                    fill="#A0D43D"
                  />
                </svg>
                <div>
                  <p className="text-xs uppercase tracking-[0.3em] text-white/40">{account?.name ?? 'Workspace'}</p>
                  <p className="text-lg font-semibold text-white">Control Center</p>
                </div>
              </div>
            </div>
            {NavLinks}
            <div className="mt-auto pt-8" />
          </aside>
        ) : null}

        <div className={`flex min-h-screen flex-col ${showNavigation ? 'lg:ml-72' : ''}`}>
          <header className="sticky top-0 z-40 border-b border-white/10 bg-base-900/40 px-6 py-5 backdrop-blur">
            <div className="flex items-center gap-4">
              <button
                type="button"
                onClick={() => setMobileOpen((value) => !value)}
                className="inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/10 bg-base-900/60 text-white/70 transition hover:border-white/20 hover:text-white lg:hidden"
                aria-label="Toggle navigation"
              >
                <span className="sr-only">Toggle navigation</span>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.6" className="h-5 w-5">
                  <path strokeLinecap="round" strokeLinejoin="round" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
              </button>
              <div className="hidden lg:block">
                <p className="text-xs uppercase tracking-[0.2em] text-white/40">Currently viewing</p>
                <p className="text-lg font-semibold text-white">{activeLabel}</p>
              </div>
              <WorkspaceSearch
                wrapperClassName="ml-auto hidden w-full max-w-md md:block"
                inputContainerClassName="md:flex"
                placeholder="Search clients, projects, or assets"
              />
              <NotificationsMenu className="hidden md:inline-flex" />
              <WorkspaceAccountMenu showOnMobile />
            </div>
              <div className="mt-4 flex flex-col gap-3 md:hidden">
                <WorkspaceSearch wrapperClassName="w-full" placeholder="Search workspace" />
                <div className="flex items-center justify-between text-xs text-white/50">
                  <span>Team workspace</span>
                  <span className="font-medium text-white/70">{account?.name ?? 'Workspace'}</span>
                </div>
              </div>
          </header>
          <main className="flex-1 space-y-6 overflow-y-auto bg-base-900/20 p-6">{children}</main>
        </div>

        {showNavigation ? (
          <AnimatePresence>
            {mobileOpen ? (
              <motion.div
                key="mobile-nav"
                initial={{ opacity: 0 }}
                animate={{ opacity: 1 }}
                exit={{ opacity: 0 }}
                className="fixed inset-0 z-50 bg-black/60 backdrop-blur lg:hidden"
                onClick={() => setMobileOpen(false)}
              >
                <motion.aside
                  initial={{ x: -40, opacity: 0 }}
                  animate={{ x: 0, opacity: 1 }}
                  exit={{ x: -40, opacity: 0 }}
                  transition={{ duration: 0.2, ease: 'easeOut' }}
                  className="absolute left-4 top-8 bottom-8 right-20 rounded-3xl border border-white/10 bg-base-900/90 p-6 shadow-2xl"
                  onClick={(event) => event.stopPropagation()}
                >
                  <div className="flex items-center justify-between">
                    <div className="flex items-center gap-3">
                      <svg
                        className="h-9 w-9 flex-shrink-0"
                        viewBox="0 0 267 259"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true"
                      >
                        <path
                          d="M105.612 3.7438C114.722 9.31108 120.644 16.449 123.612 26.7438C124.105 30.8033 124.082 34.7923 124.003 38.8766C123.997 39.9945 123.991 41.1123 123.986 42.264C123.963 45.7994 123.913 49.3337 123.862 52.8688C123.842 55.2802 123.824 57.6917 123.807 60.1032C123.764 65.9837 123.697 71.8637 123.612 77.7438C122.674 77.8643 121.736 77.9847 120.769 78.1088C119.526 78.2758 118.283 78.4428 117.003 78.6149C115.162 78.8574 115.162 78.8574 113.285 79.1049C101.177 81.2111 92.1744 87.646 84.6747 97.2438C81.1095 102.693 78.8144 109.202 79.6122 115.744C81.4392 117.993 81.4392 117.993 84.1122 117.994C86.7851 117.993 86.7851 117.993 88.6122 115.744C89.2403 113.862 89.8166 111.963 90.3622 110.056C93.1937 101.469 96.52 97.6115 104.55 93.4313C111.283 90.31 116.066 88.7438 123.612 88.7438C123.612 102.934 123.612 117.124 123.612 131.744C118.332 132.734 113.052 133.724 107.612 134.744C99.8051 137.548 93.2531 140.81 86.6122 145.744C85.6222 146.445 84.6321 147.146 83.6122 147.869C80.6423 150.389 78.5672 153.47 76.2997 156.619C69.4129 166.009 61.5562 171.096 50.6121 174.744C39.2358 175.849 28.7013 175.555 18.6121 169.744C17.519 169.146 16.4259 168.548 15.2996 167.931C7.65321 161.707 2.76133 154.407 0.612149 144.744C-0.214173 136.331 -1.0072 126.78 3.98715 119.572C9.38132 113.503 14.1554 109.182 22.4246 108.369C27.7958 108.531 32.3314 110.531 36.1903 114.275C39.9237 118.652 40.7508 121.083 40.7371 126.744C40.741 128.353 40.741 128.353 40.745 129.994C40.6121 132.744 40.6121 132.744 39.6121 134.744C39.4455 138.286 39.4455 138.286 39.6121 141.744C40.7375 143.1 40.7375 143.1 43.6746 142.806C45.1287 142.775 45.1287 142.775 46.6121 142.744C50.7417 136.818 51.1286 132.423 50.8621 125.306C50.8441 124.384 50.8261 123.462 50.8075 122.511C50.7607 120.254 50.6952 118 50.6121 115.744C51.4208 115.368 51.4208 115.368 52.2457 114.985C59.1835 111.662 64.2749 107.402 67.1473 99.9743C68.25 94.683 68.1306 89.1031 67.6122 83.7438C66.9521 82.7538 66.2922 81.7638 65.6122 80.7438C62.1472 81.2388 62.1471 81.2388 58.6121 81.7438C58.5735 83.1553 58.5735 83.1553 58.534 84.5954C57.9689 97.0026 57.9689 97.0026 53.6121 101.744C53.1623 102.277 52.7124 102.811 52.2489 103.361C50.1637 105.123 49.0039 105.177 46.2996 105.181C45.561 105.201 44.8224 105.22 44.0614 105.24C41.6121 104.744 41.6121 104.744 38.7996 102.845C35.2815 100.526 31.9745 99.5746 27.9246 98.6813C19.8245 96.8787 19.8245 96.8787 17.6121 93.7438C14.722 85.0734 15.2325 73.2571 19.1121 65.0563C24.6789 55.7741 32.1238 48.962 42.6121 45.7438C50.2502 44.5886 59.3967 44.1958 66.1043 48.4821C70.9763 52.5589 73.2538 56.5697 74.6122 62.7438C77.5287 62.9106 77.5287 62.9106 80.6122 62.7438C83.0875 60.2684 82.8257 59.4577 82.9247 56.0563C83.3848 50.8285 84.5797 47.2392 88.6122 43.7438C90.9402 42.6233 93.2992 41.7055 95.7098 40.779C97.9733 39.8149 97.9733 39.8149 98.7997 36.6188C98.921 33.6129 98.921 33.6129 96.6122 31.7438C90.9432 31.0769 87.1001 32.3625 82.6122 35.7438C80.4895 37.6608 78.5657 39.6473 76.6122 41.7438C74.2476 40.8285 71.914 39.8888 69.6278 38.7907C64.05 36.1402 58.7045 34.7104 52.6121 33.7438C52.9774 24.0648 57.3323 16.5513 64.2372 9.8688C75.6837 0.36694 91.8441 -3.46543 105.612 3.7438Z"
                          fill="#A0D43D"
                        />
                        <path
                          d="M143.612 89.7438C145.831 89.7149 148.05 89.6944 150.268 89.6774C151.504 89.665 152.74 89.6527 154.013 89.64C167.566 90.0307 180.975 97.1944 190.557 106.494C197.494 114.09 200.088 122.407 201.362 132.494C202.968 142.938 208.5 153.209 216.35 160.318C216.87 160.685 217.389 161.053 217.925 161.431C218.436 161.806 218.948 162.182 219.475 162.568C226.379 166.367 232.864 167.349 240.612 167.931C241.578 168.013 242.543 168.095 243.538 168.179C245.895 168.378 248.253 168.566 250.612 168.744C251.156 178.352 250.011 186.857 243.862 194.619C237.701 201.107 230.225 204.734 221.3 205.119C212.869 204.925 206.454 201.531 200.405 195.748C193.66 188.209 193.241 180.99 192.978 171.287C192.619 160.181 190.287 151.689 182.807 143.255C179.906 141.257 178.063 141.316 174.612 141.744C172.394 143.56 172.394 143.56 172.28 146.127C172.691 149.364 173.639 150.338 175.925 152.619C182.532 159.24 182.979 165.585 183.05 174.494C183.382 186.328 185.211 195.895 193.612 204.744C201.354 211.935 210.187 215.071 220.612 215.744C221.199 226.303 217.95 235.289 211.612 243.744C204.435 251.595 195.448 257.265 184.706 258.017C172.45 258.404 162.937 257.167 153.612 248.431C150.042 244.545 147.457 240.685 145.612 235.744C145.272 234.837 144.931 233.929 144.58 232.995C143.6 229.703 143.365 227.129 143.372 223.707C143.369 222.521 143.366 221.335 143.363 220.113C143.37 218.825 143.378 217.538 143.385 216.211C143.386 214.831 143.385 213.451 143.384 212.071C143.384 208.335 143.395 204.6 143.409 200.865C143.422 196.958 143.423 193.05 143.425 189.142C143.432 181.747 143.448 174.353 143.468 166.958C143.49 158.537 143.501 150.117 143.511 141.696C143.532 124.378 143.568 107.061 143.612 89.7438Z"
                          fill="#F5F5F5"
                        />
                        <path
                          d="M198.042 6.21643C207.226 12.7566 212.802 21.8445 215.3 32.7438C215.685 36.4413 215.676 40.0268 215.612 43.7438C216.52 43.785 217.427 43.8263 218.362 43.8688C226.831 45.0909 235.988 50.3045 241.612 56.7438C249.114 66.7983 253.039 76.0816 251.612 88.7438C248.915 100.882 239.165 108.667 229.612 115.744C229.888 119.562 229.888 119.562 231.612 122.744C234.69 123.269 236.819 123.185 239.577 121.65C244.286 118.252 248.047 114.308 251.612 109.744C257.051 110.815 259.573 114.348 262.8 118.681C266.994 125.768 267.514 132.671 266.612 140.744C265.365 144.987 263.77 148.883 261.612 152.744C261.106 153.671 260.599 154.597 260.077 155.552C256.219 158.983 252.411 158.434 247.425 158.306C246.516 158.317 245.608 158.328 244.673 158.339C235.376 158.24 228.231 155.118 221.464 148.783C214.541 141.159 211.889 132.504 210.014 122.58C207.628 110.607 202.676 100.935 192.612 93.7438C191.014 92.6936 189.409 91.6519 187.8 90.6188C184.386 88.3845 181.978 86.7442 180.612 82.7438C180.707 77.4409 181.816 74.4401 185.612 70.7438C191.352 66.6859 195.046 66.334 201.925 67.1188C204.834 67.415 207.686 67.6203 210.612 67.7438C212.821 65.9159 212.821 65.9159 213.05 63.3063C212.885 60.5657 212.885 60.5657 210.479 59.1578C207.356 57.6176 204.738 57.0475 201.3 56.5563C199.697 56.3184 199.697 56.3184 198.061 56.0758C197.253 55.9662 196.445 55.8567 195.612 55.7438C195.526 55.1147 195.439 54.4857 195.35 53.8375C193.945 45.2748 191.363 39.4394 184.237 34.2438C180.259 31.7996 177.337 30.9724 172.612 31.7438C170.301 33.6046 170.301 33.6046 170.487 36.5563C171.954 40.7124 173.876 41.4459 177.604 43.5172C180.916 45.5406 182.9 48.3188 184.612 51.7438C184.999 55.0602 184.999 55.0602 184.612 58.7438C182.382 61.3336 182.382 61.3336 179.425 63.6813C174.616 67.729 171.607 71.2529 168.612 76.7438C167.612 77.7438 167.612 77.7438 165.295 77.8573C164.295 77.8521 163.295 77.8468 162.264 77.8414C161.185 77.8382 160.105 77.835 158.993 77.8317C157.857 77.8233 156.72 77.8149 155.55 77.8063C154.409 77.8018 153.269 77.7973 152.095 77.7926C149.267 77.7808 146.44 77.7643 143.612 77.7438C143.51 70.8246 143.44 63.9055 143.392 56.9857C143.372 54.6357 143.345 52.2858 143.31 49.9359C143.261 46.5423 143.239 43.1494 143.221 39.7555C143.201 38.7186 143.18 37.6817 143.159 36.6133C143.156 25.4133 146.398 16.9751 154.167 8.91175C166.558 -2.07428 184.135 -2.21273 198.042 6.21643Z"
                          fill="#F5F5F5"
                        />
                        <path
                          d="M122.612 142.744C124.631 144.763 123.78 148.899 123.789 151.669C123.796 152.5 123.802 153.331 123.809 154.187C123.829 156.954 123.841 159.72 123.85 162.486C123.855 163.431 123.859 164.376 123.863 165.35C123.884 170.362 123.898 175.374 123.907 180.385C123.918 185.545 123.953 190.703 123.993 195.862C124.019 199.841 124.027 203.82 124.031 207.799C124.035 209.699 124.047 211.599 124.066 213.499C124.197 227.748 123.485 238.804 113.124 249.576C104.781 256.777 96.0938 258.221 85.3856 258.029C80.3874 257.651 76.8527 256.322 72.6122 253.744C71.6016 253.187 70.5909 252.63 69.5497 252.056C62.4337 246.454 57.6367 240.664 55.6122 231.744C56.3134 231.525 57.0147 231.306 57.7372 231.08C67.1558 227.932 74.7425 223.695 79.6122 214.744C81.7392 209.376 82.5449 203.481 81.6122 197.744C80.3601 195.881 80.3601 195.881 78.6122 194.744C75.294 194.986 75.294 194.986 72.6122 196.744C72.3403 198.783 72.095 200.825 71.8622 202.869C70.9872 208.616 70.104 212.862 65.6122 216.744C58.5714 221.845 49.9592 221.803 41.6122 220.744C38.1903 219.531 35.5035 217.916 32.6122 215.744C31.7047 215.166 30.7972 214.589 29.8622 213.994C24.4821 208.614 20.8493 200.907 20.4169 193.314C20.4401 192.177 20.4633 191.04 20.4872 189.869C20.5052 188.716 20.5233 187.564 20.5419 186.377C20.5651 185.508 20.5883 184.639 20.6122 183.744C21.4846 183.905 22.3569 184.065 23.2557 184.231C28.4546 185.025 33.6116 184.969 38.8622 184.994C39.9437 185.014 41.0252 185.035 42.1395 185.056C55.9951 185.123 67.8593 180.692 77.8622 170.931C80.8857 167.755 83.6536 164.489 86.2997 160.994C94.6485 149.997 108.41 141.705 122.612 142.744Z"
                          fill="#A0D43D"
                        />
                      </svg>
                      <div>
                        <p className="text-xs uppercase tracking-[0.3em] text-white/40">{account?.name ?? 'Workspace'}</p>
                        <p className="text-sm font-semibold text-white">Menu</p>
                      </div>
                    </div>
                    <button
                      type="button"
                      onClick={() => setMobileOpen(false)}
                      className="inline-flex h-9 w-9 items-center justify-center rounded-full border border-white/10 text-white/70 transition hover:border-white/20 hover:text-white"
                      aria-label="Close navigation"
                    >
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.6" className="h-5 w-5">
                        <path strokeLinecap="round" strokeLinejoin="round" d="M6 18 18 6M6 6l12 12" />
                      </svg>
                    </button>
                  </div>
                  {NavLinks}
                </motion.aside>
              </motion.div>
            ) : null}
          </AnimatePresence>
        ) : null}
      </div>
    </ToastProvider>
  )
}

export default function AppShellLayout({ children }: AppShellLayoutProps) {
  return (
    <ActiveProfileProvider>
      <AppShellLayoutInner>{children}</AppShellLayoutInner>
    </ActiveProfileProvider>
  )
}
